@section data
@section text
CALL main
HALT

main:
PUSHR fp
MOV fp, sp
PUSH16 65532
PUSHR fp
ADD
POPR sp
PUSH16 39
STR [fp, 0]

L0:
LDR [fp, 0]
PUSH16 1
CMP
JLT L2
JMP L4

L2:
JMP L1

L4:
LDR [fp, 0]
STR [fp, -2]

L5:
LDR [fp, -2]
PUSH16 1
CMP
JLT L7
JMP L9

L7:
JMP L6

L9:
PUSH16 42
POPR r0
INT 0
LDR [fp, -2]
PUSH16 1
SUB
STR [fp, -2]
JMP L5

L6:
PUSH16 13
POPR r0
INT 0
PUSH16 10
POPR r0
INT 0
LDR [fp, 0]
PUSH16 2
SUB
STR [fp, 0]
JMP L0

L1:
MOV sp, fp
POPR fp
RET
