@section data

msg = "I love my girlfriend <3\n"

@section text

main: 
	DATA      msg
	PUSH16    0
	POPR      r2         ; store the index in r2

loop:
	; duplicate the address
	LOADR     [SP, 2]   
	PUSHR     r2
	ADD
	LOADPB

	; duplicate the character
	LOADR     [SP, 2]   
	PUSH16    0
	CMP
	JEQ       end

	; prints the character at r0
	POPR      r0
	CALL      print      

	PUSHR     r2
	PUSH16    1
	ADD
	POPR      r2

	JMP       loop

end:
	HALT
